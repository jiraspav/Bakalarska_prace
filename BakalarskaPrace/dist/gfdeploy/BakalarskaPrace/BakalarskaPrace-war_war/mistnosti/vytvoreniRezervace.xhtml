<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <ui:composition template="./../template.xhtml">
        <ui:define name="content">
            <h:form id="form">  

                <p:growl id="messages" showDetail="true"/>
                <p:panelGrid columns="2">
                    <p:scrollPanel id="scroll" style="width:400px;height:600px" mode="native">
                        <p:tree id="treeSingle" value="#{vytvoreniRezervaceBean.root}" var="node"  
                                selectionMode="single"  
                                selection="#{vytvoreniRezervaceBean.selectedNode}" 
                                >  
                            <p:ajax event="select" update=":form:rozvrhyMistnosti :form:myschedule" />  

                            <p:treeNode>  
                                <h:outputText value="#{node}" />  
                            </p:treeNode>  
                        </p:tree>  
                    </p:scrollPanel>
                    <p:panel style="width:600px">
                        <f:facet name="header">Rezervace m√≠stnosti</f:facet>
                        <p:schedule id="myschedule" value="#{scheduleMistnostiController.eventModel}" widgetVar="myschedule" 
                                    draggable="false" resizable="false"
                                    timeZone="#{scheduleMistnostiController.timeZone}">  

                            <p:ajax event="dateSelect" listener="#{scheduleMistnostiController.onDateSelect}" update="eventDetails messages" oncomplete="eventDialog.show()" />  

                        </p:schedule> 
                    </p:panel>
                    

                </p:panelGrid>
                <p:panel id="rozvrhyMistnosti">
                    <p:scrollPanel mode="native">
                        <p:dataTable var="rozvrh" value="#{vytvoreniRezervaceBean.rozvrhyMistnosti}">

                            <f:facet name="header">#{msgs.vytvoreniRezervaceTableHeaderRoomSchedule}</f:facet>

                            <p:columnGroup type="header">  
                                <p:row>  
                                    <p:column colspan="1" headerText="#{msgs.vytvoreniRezervaceTableDayColl}"/>
                                    <p:column colspan="2" headerText="7:30 - 9:00" />  
                                    <p:column colspan="2" headerText="9:15 - 10:45" />  
                                    <p:column colspan="2" headerText="11:00 - 12:30" />  
                                    <p:column colspan="2" headerText="12:45 - 14:15" />  
                                    <p:column colspan="2" headerText="14:30 - 16:00" />  
                                    <p:column colspan="2" headerText="16:15 - 17:45" />  
                                    <p:column colspan="2" headerText="18:00 - 19:30" />  
                                    <p:column colspan="1" headerText="19:45 - " />  

                                </p:row>  
                            </p:columnGroup>

                            <p:column><h:outputText value="#{rozvrh.getDen()}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(0)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(1)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(2)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(3)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(4)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(5)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(6)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(7)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(8)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(9)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(10)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(11)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(12)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(13)}"/></p:column>
                            <p:column><h:outputText value="#{rozvrh.getHodinu(14)}"/></p:column>
                        </p:dataTable>
                    </p:scrollPanel>

                    <p:commandButton value="#{msgs.vytvoreniRezervaceButtNewReservation}" oncomplete="eventDialog.show()"/>
                    <p:commandButton value="#{msgs.vytvoreniRezervaceButtUpdate}" actionListener="#{vytvoreniRezervaceBean.smazRoot()}" process="@parent" update="scroll"/>
                    
                    
                    <p:dialog widgetVar="eventDialog" header="#{msgs.vytvoreniRezervaceDialogHeader}" showEffect="clip" hideEffect="clip">  
                        <p:messages id="rezMsgs" showDetail="true" globalOnly="true"/>
                        <h:panelGrid id="eventDetails" columns="3">  
                            <h:outputLabel for="popis" value="#{msgs.vytvoreniRezervaceDialogDescript} "/>
                            <h:inputTextarea id="popis" value="#{scheduleMistnostiController.popis}"/>
                            <h:outputText/>
                            <h:outputLabel for="mistnost" value="#{msgs.vytvoreniRezervaceDialogRoom} " />  
                            <h:outputText id="mistnost" value="#{vytvoreniRezervaceBean.selectedNode}"/>
                            <h:outputText/>
                            <h:outputLabel for="datum" value="#{msgs.vytvoreniRezervaceDialogDate}" />  
                            <p:calendar value="#{scheduleMistnostiController.event.startDate}" id="datum" required="true"/>
                            <p:message for="datum" display="icon"/>
                            <h:outputText  value="#{msgs.vytvoreniRezervaceDialogTimeFrom} " />  
                            <p:calendar value="#{scheduleMistnostiController.casOd}" id="casOd" pattern="HH:mm" timeOnly="true" required="true"/>
                            <p:message for="casOd" display="icon"/>
                            <h:outputText  value="#{msgs.vytvoreniRezervaceDialogTimeTo} " />  
                            <p:calendar value="#{scheduleMistnostiController.casDo}" id="casDo" pattern="HH:mm" timeOnly="true" />
                            <p:message for="casDo" display="icon"/>
                            <h:outputLabel for="naCelouMistnost" value="#{msgs.vytvoreniRezervaceDialogWholeRoomRes} " />  
                            <p:selectBooleanCheckbox id="naCelouMistnost" value="#{scheduleMistnostiController.naCelouMistnost}"  />
                            <h:outputText/>
                        </h:panelGrid>
                        
                        <p:commandButton value="#{msgs.vytvoreniRezervaceDialogButtReservate}" actionListener="#{scheduleMistnostiController.addEvent}" oncomplete="myschedule.update();" update="eventDetails rezMsgs" ajax="true"/>  
                          
                    </p:dialog>  
                </p:panel>
            </h:form>  
        </ui:define>
    </ui:composition>  
</html>

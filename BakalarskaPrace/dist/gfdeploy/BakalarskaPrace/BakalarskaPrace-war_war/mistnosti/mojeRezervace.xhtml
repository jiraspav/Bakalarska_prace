<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <ui:composition template="./../template.xhtml">
        <ui:define name="content">
            <h:form id="form">
                <p:dataTable id="tabulkaRezervaci" var="rez" value="#{mojeRezervaceBean.items}" rowKey="#{rez.IDrezervace}" paginator="true" rows="5"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                            rowsPerPageTemplate="5,10,15,20" >  


                <f:facet name="header">  
                    <h:outputText value="#{msgs.mojeRezervace}"/>
                </f:facet>  

                <p:column headerText="#{msgs.mistnost}" sortBy="#{rez.iDmistnosti}" filterBy="#{rez.IDmistnosti}" >  
                    #{rez.IDmistnosti.zkratka}  
                </p:column>  
                <p:column headerText="#{msgs.datum}" sortBy="#{rez.datumRezervace}" filterBy="#{rez.datumRezervace}" >  
                    #{rez.getFormatedDatumRezervace()}  
                </p:column>
                <p:column headerText="#{msgs.od}" sortBy="#{rez.od}" filterBy="#{rez.od}" >  
                    #{rez.getFormatedOd()}  
                </p:column>
                <p:column headerText="#{msgs.do}" sortBy="#{rez.do1}" filterBy="#{rez.do1}" >  
                    #{rez.getFormatedDo1()}  
                </p:column>
                <p:column headerText="#{msgs.pocetMist}" sortBy="#{rez.pocetRezervovanychMist}" filterBy="#{rez.pocetRezervovanychMist}" >  
                    #{rez.pocetRezervovanychMist}  
                </p:column>
                <p:column headerText="#{msgs.status}" sortBy="#{rez.status}" filterBy="#{rez.status}" >  
                    #{rez.status}  
                </p:column>
                <p:column style="width:4%">  
                    <p:commandButton id="selectButton" oncomplete="confirmDialog.show()" icon="ui-icon-trash" title="Delete">  
                        <f:setPropertyActionListener value="#{rez}" target="#{mojeRezervaceBean.selectedRow}" />  
                    </p:commandButton>  
                </p:column>
            </p:dataTable>  
           
                
            <p:dialog id="confDialog" header="#{msgs.mojeRezervaceConfDialogHeader}" widgetVar="confirmDialog" resizable="false"  
                      width="200" showEffect="clip" hideEffect="fold" modal="true">
                    <h:outputText value="#{msgs.mojeRezervaceConfDialogConf}"/>
                <h:panelGrid columns="2">  
                    <p:commandButton value="Ok" actionListener="#{mojeRezervaceBean.deleteReservation()}" process="@this" update="tabulkaRezervaci" oncomplete="confirmDialog.hide()"/>
                    <p:commandButton value="Cancel" oncomplete="confirmDialog.hide()"/>
                </h:panelGrid>
            </p:dialog>
            
            </h:form>
            
        </ui:define>
    </ui:composition>           

</html>

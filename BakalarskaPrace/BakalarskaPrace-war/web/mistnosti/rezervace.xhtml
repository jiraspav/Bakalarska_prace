<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <ui:composition template="./../template.xhtml">
        <ui:define name="content">
            <h:form id="form">  

                <p:growl id="messages" showDetail="true"/>
                <div class="row">
                    <div class="tabbable"> <!-- Only required for left/right tabs -->
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#tab1" data-toggle="tab">
                                    <h:outputText value="#{msgs.menuMistnostiMojeRezervace}" />
                                </a>
                            </li>
                            <li>
                                <a href="#tab2" data-toggle="tab">
                                    <h:outputText value="#{msgs.menuMistnostiVytvoreniRezervace}" />
                                </a>
                            </li>
                            <li>
                                <a href="#tab3" data-toggle="tab">
                                    <h:outputText value="#{msgs.menuMistnostiNajitMistnost}" />
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="tab1">

                                <p:dataTable id="tabulkaRezervaci" var="rez" value="#{mojeRezervaceBean.items}" rowKey="#{rez.IDrezervace}" paginator="true" paginatorAlwaysVisible="false" rows="5"
                                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                            rowsPerPageTemplate="5,10,15,20" paginatorPosition="bottom">  


                                    <f:facet name="header">  
                                        <h:outputText value="#{msgs.mojeRezervace}"/>
                                    </f:facet>  

                                    <p:column headerText="#{msgs.mistnost}" sortBy="#{rez.iDmistnosti}" filterBy="#{rez.IDmistnosti}" >  
                                        #{rez.IDmistnosti.zkratka}  
                                    </p:column>  
                                    <p:column headerText="#{msgs.datum}" sortBy="#{rez.datumRezervace}" filterBy="#{rez.datumRezervace}" >  
                                        #{rez.getFormatedDatumRezervace()}  
                                    </p:column>
                                    <p:column headerText="#{msgs.od}" sortBy="#{rez.od}" filterBy="#{rez.od}" >  
                                        #{rez.getFormatedOd()}  
                                    </p:column>
                                    <p:column headerText="#{msgs.do}" sortBy="#{rez.do1}" filterBy="#{rez.do1}" >  
                                        #{rez.getFormatedDo1()}  
                                    </p:column>
                                    <p:column headerText="#{msgs.pocetMist}" sortBy="#{rez.pocetRezervovanychMist}" filterBy="#{rez.pocetRezervovanychMist}" >  
                                        #{rez.pocetRezervovanychMist}  
                                    </p:column>
                                    <p:column headerText="#{msgs.status}" sortBy="#{rez.status}" filterBy="#{rez.status}" >  
                                        #{rez.status}  
                                    </p:column>
                                    <p:column style="width:4%">  
                                        <p:commandButton id="selectButton" oncomplete="confirmDialog.show()" icon="ui-icon-trash" title="Delete">  
                                            <f:setPropertyActionListener value="#{rez}" target="#{mojeRezervaceBean.selectedRow}" />  
                                        </p:commandButton>  
                                    </p:column>
                                </p:dataTable>  


                                <p:dialog id="confDialog" header="#{msgs.mojeRezervaceConfDialogHeader}" widgetVar="confirmDialog" resizable="false"  
                                        width="200" showEffect="clip" hideEffect="fold" modal="true">
                                        <h:outputText value="#{msgs.mojeRezervaceConfDialogConf}"/>
                                    <h:panelGrid columns="2">  
                                        <p:commandButton value="Ok" actionListener="#{mojeRezervaceBean.deleteReservation()}" process="@this" update="tabulkaRezervaci" oncomplete="confirmDialog.hide()"/>
                                        <p:commandButton value="Cancel" oncomplete="confirmDialog.hide()"/>
                                    </h:panelGrid>
                                </p:dialog>
                            </div>
                            <div class="tab-pane" id="tab2">
                                <p>Howdy, I'm in Section 2.</p>
                            </div>
                            <div class="tab-pane" id="tab3">
                                <p>Bitch, I'm in Section 3.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="span9">
                                            
                        <f:facet name="header">Rezervace m√≠stnosti</f:facet>
                        <p:schedule id="myschedule" value="#{scheduleMistnostiController.eventModel}" widgetVar="myschedule" 
                                    draggable="false" resizable="false"
                                    timeZone="#{scheduleMistnostiController.timeZone}">  

                        </p:schedule> 
                    
                    </div>
                </div>
            </h:form>  
        </ui:define>
    </ui:composition>  
</html>

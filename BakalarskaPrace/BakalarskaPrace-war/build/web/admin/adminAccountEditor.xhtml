<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <ui:composition template="./../template.xhtml">
        <ui:define name="content">
            <h:form id="form">
                <p:messages id="msgs" showDetail="true"/>
                <p:dataTable id="tabulkaUzivatelu" var="uziv" value="#{AdminAccEditor.items}" rowKey="#{uziv.IDuser}" paginator="true" rows="10"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                            rowsPerPageTemplate="5,10,15,20" selection="#{AdminAccEditor.selectedRow}" selectionMode="single">  


                    <f:facet name="header">  
                        <h:outputText value="Registrovaní uživatelé"/>
                    </f:facet>  

                    <p:column headerText="Login" sortBy="#{uziv.login}" filterBy="#{uziv.login}" >  
                        #{uziv.login}  
                    </p:column>  
                    <p:column headerText="Celé jméno" sortBy="#{uziv.jmeno}" filterBy="#{uziv.jmeno}" >  
                        #{uziv.jmeno}  
                    </p:column>
                    <p:column headerText="Role" sortBy="#{LoginVerifier.getRole(uziv)}" filterBy="#{LoginVerifier.getRole(uziv)}" >  
                        #{LoginVerifier.getRole(uziv)}  
                    </p:column>
                    
                    <f:facet name="footer">  
                        <p:commandButton value="Přidat administrátorská práva" actionListener="#{AdminAccEditor.pridejAdminRoli()}" update="tabulkaUzivatelu :form:msgs" />  
                        <p:commandButton value="Odebrat administrátorská práva" actionListener="#{AdminAccEditor.odeberAdminRoli()}" update="tabulkaUzivatelu :form:msgs" />  
                        <p:commandButton value="Vytvořit nový guest účet" actionListener="#{AdminAccEditor.vytvorGuestUcet()}" oncomplete="guestDialog.show()" update="tabulkaUzivatelu :form:msgs :form:guestDetails" />  
                        <p:commandButton value="Zrušit guest účet" actionListener="#{AdminAccEditor.checkGuest()}" oncomplete="confirmDialog.show()" update=":form:msgs :form:confDialog" />  
                    </f:facet> 
                    
                     

                </p:dataTable>  
                
                <p:dialog id="guestDialog" header="Nový guest účet" widgetVar="guestDialog" resizable="false"  
                                width="300" showEffect="clip" hideEffect="fold" modal="true">
                    <h:outputText value="Následující údaje je nutné si uložit, jelikož je nebude možné v budoucnu znovu vypsat či změnit."/>
                    <h:panelGrid id="guestDetails" columns="2">  
                        <h:outputText value="Login: "/>
                        <h:outputText value="#{AdminAccEditor.guestLogin}"/>
                        <h:outputText value="Heslo: "/>
                        <h:outputText value="#{AdminAccEditor.guestPassword}"/>
                    </h:panelGrid>
                </p:dialog>
                
                <p:dialog header="Potvrzení" widgetVar="confirmDialog" resizable="false"  
                                width="200" showEffect="clip" hideEffect="fold" modal="true">
                    <h:panelGrid id="confDialog">
                    <h:outputText value="#{AdminAccEditor.confDialog}" />
                    <h:panelGrid columns="2">  
                        <p:commandButton value="Ok" actionListener="#{AdminAccEditor.zrusGuestUcet()}" process="@this" update="tabulkaUzivatelu msgs" oncomplete="confirmDialog.hide()"/>
                        <p:commandButton value="Cancel" oncomplete="confirmDialog.hide()"/>
                    </h:panelGrid>
                    </h:panelGrid>
                </p:dialog>
                
            </h:form>
        </ui:define>
    </ui:composition>  
</html>









